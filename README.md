О приложении
------------

weather_app - это приложение для отслеживания погоды. На одном графике происходит  отображение информации за определенный промежуток времени, а именно - температуры, давления, влажности.
Поскольку это тестовое задание, приложение ограничено одним случайно выбранным регионом.

Архитектура
-----------

Приложение состоит из ряда блоков:

1. backend - модуль backend'а, написанный на языке python с использованием фреймворка django и нескольких ключевых надстроек, а именно - django-rest-framework (для построения REST), django-cors-headers (для поддержки CORS). Список остальных библиотек можно найти в файле backend/app/requirements.txt.
В качестве WSGI (визги) сервера был выбран - gunicorn. Соответственно и production развертка происходит через него.

2. frontend - модуль frontend'а. Для написания этого модуля использовали сборщик - webpack, библиотеки JS - react, redux, axios.

Модули вебпака, которые использовались для сборки:<br>
• Основные модули Webpack<br>
	- webpack — сборка модулей.<br>
	- webpack-cli — работа с Webpack из командной строки.<br>
	- webpack-dev-server — сервер разработки.<br>
• Плагины:<br>
	- html-webpack-plugin - упрощает создание файлов HTML и может автоматически вставлять модули JavaScript в наш основной шаблом HTML<br>
	- mini-css-extract-plugin - создает единый файл css и передает его html-webpack-plugin'у для встройки в html-шаблон.<br>
	- @babel/plugin-proposal-class-properties - плагин для babel, включает поддержку экспериментального синтаксиса classProperties<br>
• Загрузчики:<br>
	- babel-loader — загрузчик - использует Babel для загрузки файлов ES2015. Установлен babel-core, в который входит babel-loader. Подключен модуль babel-preset-env, который компилирует ES2015+ в ES5 путем автоматического определения необходимых Babel плагинов и полифайлов.<br>
	+ babel-loader<br>
	+ babel-core<br>
	+ babel-preset-env — создание кода, подходящего для старых браузеров.<br>
	+ babel-preset-react — настройка транспилятора для работы с React-кодом.<br>
	- sass-loader - загрузчик - позволяет нам использовать стиль scss в нашем приложении, для этого нам также понадобится модуль node-sass, который позволяет нам скомпилировать файлы .scss в .css. Рекомендуется использовать его вместе с css-loader, чтобы превратить его в модуль JS и загрузчик стилей style-loader, которые добавят в CSS в DOM, внедряя тег style.<br>
	+ sass-loader<br>
	+ node-sass — компилятор scss в css<br>
	+ css-loader — позволяет импортировать стили внутрь js кода<br>

Для production развертка идет через nginx, файл конфигурации nginx лежит по пути frontend/nginx.<br>

3. api_request_app - модуль, для опрашивания информационной API с погодой. Опрос удаленной API происходит раз в час, после опроса, полученный ответ в виде JSON парсится и записывается в базу. Список библиотек можно найти в файле api_request_app/app/requirements.txt.

4. db - в качестве базы данных взята docker-версия postgresql12. 
Монтирование директории хоста для хранения информации находится по адресу: /home/dev/postgres_data/weather_app/

Развертка
---------

Для запуска приложения есть два вида сборки. dev и production соответственно.
Для запуска dev используйте команду:
docker-compose -f dev.yml up --build -d (sudo при необходимости).
Для запуска production используйте команду:
docker-compose -f prod.yml up --build -d (sudo при необходимости).
Для остановки одной из сборок (находясь в корневой папке проекта:
docker-compose -f dev.yml (prod.yml) down (sudo при необходимости).

Заполнение тестовыми данными
----------------------------

Для заполнения приложения тестовыми данными можно воспользоваться дампом базы данных, который лежит в корневой дирректории - dump.sql.
Либо запустить скрипт (при поднятом проекте) внутри собранного контейнера с api_request_app - /app/create_values_from_db.py (скрипт заполнит базу случайными значениями и приложение можно будет протестировать).

